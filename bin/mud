#!/usr/bin/env php
<?php
declare(strict_types=1);

require_once __DIR__.'/../bootstrap.php';

use PhpMud\Entity\Room;
use PhpMud\Entity\Item;
use PhpMud\Enum\Material;
use PhpMud\Server;

$roomRepository = $em->getRepository(Room::class);
$room = $roomRepository->find(1);

if (!$room) {
    $logger->debug('creating initial world fixtures');
    $room = new Room();
    $room->setTitle('Midgaard Town Center');
    $room->setDescription('Before you is the town center.');
    $room->getInventory()->add(new Item('a copper teapot', Material::COPPER()));
}

(new Server($em, $room, $logger))->listen($config['port']);